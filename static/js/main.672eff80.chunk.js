(this["webpackJsonpcovid-19"]=this["webpackJsonpcovid-19"]||[]).push([[0],{24:function(e,t,a){e.exports=a(57)},29:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(19),c=a.n(s),o=(a(29),a(9)),l=a.n(o),i=a(20),u=a(23),d=a(7),h=a(8),m=a.n(h),p=a(6),v=a.n(p),f=a(2),g=a(3),E=a(4),y=a(5),b=a(21),_=a.n(b),w=(a(50),a(51),["address","arrowDown","arrow","cal","close","download","edit","filter","home","logout","notification","phone","post","repeat","search","see","trash","burgerMenu","chevron","email","plus","secondaryMenu"]),S=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={},n}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=void 0===t?"":t,n=e.icon,s=void 0===n?"":n,c=e.size,o=void 0===c?"":c,l=e.color,i=void 0===l?"":l;if(-1!==w.indexOf(s)){var u=!i||"white"!==i&&"red"!==i?"":i;return i&&"white"!==i&&"red"!==i&&console.error("[Icon]: You attempted to pass a color that is not supported: (".concat(i,") to the icon: (").concat(s,"). The only options are 'white' or 'red'. We applied the fallback/default color.")),r.a.createElement("span",{className:"icon icon__".concat(s).concat(u?"--".concat(u):"").concat(a?" ".concat(a):""),style:{height:"".concat(o,"px"),width:"".concat(o,"px"),minWidth:"".concat(o,"px")}})}return console.error("[Icon]: You attempted to pass an icon name that is not supported: (".concat(s,"). See 'Icon.js' line 5 for options.")),null}}]),a}(n.Component),N=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"renderDropDown",value:function(){var e=this.props,t=e.disabled,a=void 0!==t&&t,n=e.options,s=void 0===n?[]:n,c=e.placeholder,o=void 0===c?"":c,l=e.selectedvalue,i=void 0===l?"":l,u=e.name,d=void 0===u?"":u,h=s.map((function(e){return r.a.createElement("option",{value:e.value,key:v()()},e.title)}));return r.a.createElement("select",Object.assign({name:d||"",disabled:a,value:i},this.props),o&&r.a.createElement("option",{value:""},o),h)}},{key:"renderLabel",value:function(){var e=this.props.label,t=void 0===e?"":e;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("span",{className:"dropdown__label"},r.a.createElement("em",null,t)),this.renderDropDown(),r.a.createElement(S,{classes:"dropdown__icon",icon:"chevron",size:"12"}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=void 0===t?"":t,n=e.labelPlacement,s=e.size,c=void 0===s?"":s;return r.a.createElement("div",{className:"".concat(c?"dropdown--".concat(c):"").concat(a?" ".concat(a):"")},r.a.createElement("label",{className:"dropdown"},"left"===n?r.a.createElement("div",{className:"dropdown__flex"},this.renderLabel()):this.renderLabel()))}}]),a}(n.Component),x=(a(52),function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={showClear:!1,inputValue:""},n}return Object(g.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=void 0===a?"":a,s=t.title,c=void 0===s?"":s,o=t.onChangeHandler,l=t.icon,i=void 0===l?"search":l,u=t.type,d=void 0===u?"text":u,h=t.value,m=void 0===h?"":h,p=t.placeholder,f=void 0===p?"S\xf8k":p,g=this.state,E=g.inputValue,y=g.showClear;return r.a.createElement("div",{className:"search".concat(n?" ".concat(n):"")},r.a.createElement("label",{htmlFor:"search"},c&&r.a.createElement("span",{className:"search__label"},r.a.createElement("em",null,c)),r.a.createElement("input",{id:v()(),className:"search__input",autoComplete:"off",value:m||E,type:d,placeholder:f,onChange:function(t){e.setState({showClear:""!==t.target.value,inputValue:t.target.value}),o(t.target.value)}}),i&&r.a.createElement(S,{classes:"search__icon-search",icon:i,size:"16"}),y&&r.a.createElement("div",{className:"search__icon-close",role:"button",tabIndex:0,onClick:function(){o(""),e.setState({showClear:!1,inputValue:""})}},r.a.createElement(S,{icon:"close",size:"12"}))))}}]),a}(n.Component)),k=(a(53),function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).state={showSearch:!1,showSettings:!1},n.headerContentRef=r.a.createRef(),n}return Object(g.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.props.headerHeight,n=this.state,r=n.showSearch,s=n.showSettings;a===e.headerHeight&&r===t.showSearch&&s===t.showSettings||this.getHeaderRefHeight()}},{key:"setHeaderIsExpanded",value:function(e,t){var a=this.props.handleHeaderIsExpanded,n=this.state,r=n.showSearch,s=n.showSettings;a(!!e||(!(e||"search"!==t||!s)||!(e||"settings"!==t||!r)))}},{key:"getHeaderRefHeight",value:function(){(0,this.props.handleHeaderHeight)(Math.max(this.headerContentRef.current.clientHeight,this.headerContentRef.current.offsetHeight,this.headerContentRef.current.scrollHeight))}},{key:"handleShowSearch",value:function(){var e=this.state.showSearch;this.setState({showSearch:!e}),this.setHeaderIsExpanded(!e,"search"),this.getHeaderRefHeight("search")}},{key:"handleShowSettings",value:function(){var e=this.state.showSettings;this.setState({showSettings:!e}),this.setHeaderIsExpanded(!e,"settings"),this.getHeaderRefHeight("settings")}},{key:"handleSearch",value:function(e){var t=this.props,a=t.handleIsSearching,n=t.handleSearchValue;a(!0),n(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n=t.handleSortBy,s=t.headerIsExpanded,c=t.searchValue,o=t.sortBy,l=this.state,i=l.showSearch,u=l.showSettings;return r.a.createElement("div",{className:"header".concat(s?" is-expanded":"")},r.a.createElement(_.a,{repo:"https://github.com/dreamyguy/covid-19",side:"left"}),r.a.createElement("div",{className:"header__content",ref:this.headerContentRef},r.a.createElement("div",{className:"header__items display-flex align-center"},r.a.createElement("div",{className:"logo display-flex flex-direction-column"},r.a.createElement("h1",{className:"heading--site"},"COVID-19"),r.a.createElement("div",{className:"legends display-flex"},r.a.createElement("div",{className:"legend legend--cures"},r.a.createElement("span",{className:"legend__color"}),r.a.createElement("span",{className:"legend__label"},"Cures")),r.a.createElement("div",{className:"legend legend--sick"},r.a.createElement("span",{className:"legend__color"}),r.a.createElement("span",{className:"legend__label"},"Sick")),r.a.createElement("div",{className:"legend legend--deaths"},r.a.createElement("span",{className:"legend__color"}),r.a.createElement("span",{className:"legend__label"},"Deaths")))),r.a.createElement("div",{className:"message display-flex flex-direction-column"},r.a.createElement("h2",{className:"heading--message"},"There's a human story behind every number.")),r.a.createElement("div",{className:"options display-flex"},r.a.createElement("button",{className:"option option--search".concat(i?" is-active":""),onClick:this.handleShowSearch.bind(this)},i?r.a.createElement(S,{icon:"search",color:"white",size:"24"}):r.a.createElement(S,{icon:"search",size:"24"})),r.a.createElement("button",{className:"option option--settings".concat(u?" is-active":""),onClick:this.handleShowSettings.bind(this)},u?r.a.createElement(S,{icon:"filter",color:"white",size:"24"}):r.a.createElement(S,{icon:"filter",size:"24"})))),u&&r.a.createElement(N,{name:"dropdown--sortby",classes:"dropdown--sortby",label:"Sort by:",labelPlacement:"left",selectedvalue:o,disabled:a,options:[{value:"cases",title:"Cases"},{value:"country",title:"Country"},{value:"cures",title:"Cures"},{value:"curesPercent",title:"Cures Percent"},{value:"deaths",title:"Deaths"},{value:"deathsPercent",title:"Deaths Percent"},{value:"sick",title:"Sick"}],placeholder:"Sort by",onChange:function(e){n(e.target.value)}}),i&&r.a.createElement(x,{classes:"search--country",value:c,placeholder:"Filter by country name",onChangeHandler:function(t){e.handleSearch(t)}})))}}]),a}(n.Component)),C=(a(54),function(){return r.a.createElement("footer",null,"Developed by\xa0",r.a.createElement("a",{className:"link",href:"https://github.com/dreamyguy/"},"Wallace Sidhr\xe9e"))}),O=(a(55),function(){return r.a.createElement("div",{className:"loading__text"},r.a.createElement("h3",null,"Fetching live data and preparing it."),r.a.createElement("p",{className:"loading__option"},r.a.createElement("b",null,"Once the loading is done"),":"),r.a.createElement("p",{className:"loading__option"},r.a.createElement("span",{className:"option option--settings centered"},r.a.createElement(S,{icon:"filter",size:"24"})),"Activate filtering options."),r.a.createElement("p",null,r.a.createElement("span",{className:"option option--search centered"},r.a.createElement(S,{icon:"search",size:"24"})),"Search by country name."),r.a.createElement("p",null,"Number of cases is the default view, ",r.a.createElement("em",null,r.a.createElement("b",null,"but the data can be filtered")," to show other calculations"),"."))}),j=a(22),H=a.n(j);function I(e){return e&&e.constructor===Array?e.length>0:(console.error("[isNotEmptyArray]: The array being verified is not an array: ".concat(e)),!1)}var D=function(e){return Number(e).toLocaleString()},V=function(e){var t=e.countries,a=e.sortBy,n=e.mode;return t&&I(t)?("country"===a?t.sort((function(e,t){var a=e.country.toLowerCase(),n=t.country.toLowerCase();return a<n?-1:a>n?1:0})):"desc"===n?t.sort((function(e,t){return t[a]-e[a]})):t.sort((function(e,t){return e[a]-t[a]})),t):console.log("[sortCountriesBy]: 'countries' (".concat(t,") is not an array or is empty"))},P=function(e){var t=[];return e.forEach((function(e){t.push({country:e["Country/Region"],value:e[Object.keys(e)[Object.keys(e).length-1]]})})),function(e){var t=[];return e.forEach((function(e){var a=t.filter((function(t){return t.country===e.country}));if(a.length){var n=t.indexOf(a[0]);t[n].value=parseInt(t[n].value,10)+parseInt(e.value,10)}else e.value=parseInt(e.value,10),t.push(e)})),t}(t)},B=function(e,t){return function(e){return H()({output:"json"}).fromString(e).then((function(e){return P(e)}))}(e)},R=function(e){var t=e.cases,a=e.cures,n=e.deaths,r=[];return t&&I(t)&&t.forEach((function(e){var t=r.filter((function(t){return t.country===e.country}));if(t.length){var s=r.indexOf(t[0]);r[s]=Object(d.a)({},r[s],{cases:e.value})}else r.push({country:e.country,cases:e.value});a&&I(a)&&a.forEach((function(e){var t=r.filter((function(t){return t.country===e.country}));if(t.length){var a=r.indexOf(t[0]);r[a]=Object(d.a)({},r[a],{cures:e.value})}else r.push({country:e.country,cures:e.value});n&&I(n)&&n.forEach((function(e){var t=r.filter((function(t){return t.country===e.country}));if(t.length){var a=r.indexOf(t[0]);r[a]=Object(d.a)({},r[a],{deaths:e.value})}else r.push({country:e.country,deaths:e.value})}))}))})),r},z=function(e){var t=[];return e&&I(e)&&e.forEach((function(e){var a=e.country,n=e.cases,r=e.cures,s=e.deaths,c=n-(r+s);t.push({country:a,cases:n,sick:c,cures:r,deaths:s,sickPercent:100*c/n,curesPercent:100*r/n,deathsPercent:100*s/n})})),t},L=function(e){var t=[];return e&&I(e)&&(t=e.reduce((function(e,t){return{country:"WORLD",cases:e.cases+t.cases,cures:e.cures+t.cures,deaths:e.deaths+t.deaths,sick:e.cases-(e.cures+e.deaths)+(t.cases-(t.cures+t.deaths)),sickPercent:100*(e.cases-(e.cures+e.deaths)+(t.cases-(t.cures+t.deaths)))/(e.cases+t.cases),curesPercent:100*(e.cures+t.cures)/(e.cases+t.cases),deathsPercent:100*(e.deaths+t.deaths)/(e.cases+t.cases)}}))),t},F=(a(56),{errorStats:"",headerHeight:null,headerIsExpanded:!1,isSearching:!1,searchValue:"",loading:!1,sortBy:"cases",stats:[]}),W=function(e,t){return Object(d.a)({},e,{},t)},M=function(e,t){var a=e.country,n=e.cases,s=e.cures,c=e.deaths,o=e.sick,l=e.sickPercent,i=e.curesPercent,u=e.deathsPercent;return r.a.createElement("li",{key:v()(),className:"country"},r.a.createElement("div",null,r.a.createElement("h2",{className:"heading--country"},t,". ",a),r.a.createElement("div",{className:"display-flex stats"},s?r.a.createElement("span",{className:"stat stat--cures"},D(s)):null,o?r.a.createElement("span",{className:"stat stat--sick"},D(o)):null,c?r.a.createElement("span",{className:"stat stat--deaths"},D(c)):null)),r.a.createElement("div",{className:"display-flex percentages"},r.a.createElement("div",{className:"percentage percentage--cures",style:{width:"".concat(i,"%")}}),r.a.createElement("div",{className:"percentage percentage--sick",style:{width:"".concat(l,"%")}}),r.a.createElement("div",{className:"percentage percentage--deaths",style:{width:"".concat(u,"%")}})),r.a.createElement("div",{className:"total"},D(n)))},T=function(){var e=Object(n.useReducer)(W,F),t=Object(u.a)(e,2),a=t[0],s=t[1];Object(n.useEffect)((function(){s({loading:!0});m.a.all([m.a.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv"),m.a.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_recovered_global.csv"),m.a.get("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv")]).then((function(e){return e&&I(e)?function(){var t=Object(i.a)(l.a.mark((function t(){var a,n,r,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e[0].data);case 2:return a=t.sent,t.next=5,B(e[1].data);case 5:return n=t.sent,t.next=8,B(e[2].data);case 8:r=t.sent,I(a)&&I(n)&&I(r)&&(c=z(R({cases:a,cures:n,deaths:r})),o=L(c),c.push(o),s({stats:c,loading:!1}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()():null})).catch((function(e){s({errorStats:e.message,loading:!1})}))}),[]);var c=a.headerHeight,o=a.headerIsExpanded,d=a.isSearching,h=a.loading,p=a.searchValue,v=a.sortBy,f=a.stats,g="".concat(o?c+30:108,"px");return r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{handleHeaderHeight:function(e){s({headerHeight:e})},handleHeaderIsExpanded:function(e){s({headerIsExpanded:e})},handleIsSearching:function(e){s({isSearching:e})},handleSearchValue:function(e){s({searchValue:e})},handleSortBy:function(e){s({sortBy:e})},headerHeight:c,headerIsExpanded:o,loading:h,sortBy:v}),r.a.createElement("div",{className:"app align-center",style:{paddingTop:g}},h?r.a.createElement(O,null):f&&I(f)&&r.a.createElement("ul",{className:"countries"},d&&p?r.a.createElement(r.a.Fragment,null,function(e){var t=e.stats,a=e.searchValue,n=[];return t.forEach((function(e,t){var r,s;r=e.country,s=a,-1!==r.toLowerCase().replace("-"," ").indexOf(s.toLowerCase().replace("-"," "))&&n.push(M(e,t+1))})),n}({stats:V({countries:f,sortBy:v,mode:"desc"}),isSearching:d,searchValue:p})):r.a.createElement(r.a.Fragment,null,function(e){var t=[];return e.forEach((function(e,a){t.push(M(e,a+1))})),t}(V({countries:f,sortBy:v,mode:"desc"}))))),r.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.672eff80.chunk.js.map